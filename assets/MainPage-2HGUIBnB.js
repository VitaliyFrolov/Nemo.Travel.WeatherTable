import{j as t,r as o}from"./index-Dt8sxY9-.js";const g="_container_1mmee_1",S={container:g},v=({children:a})=>t.jsx("div",{className:S.container,children:a}),y=async a=>{const s=`https://api.open-meteo.com/v1/forecast?latitude=${55.751244}&longitude=${37.618423}&daily=${a.join(",")}&timezone=Europe/Moscow&past_days=0`;return fetch(s,{method:"GET"}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})},j=["rain_sum","snowfall_sum","weathercode","temperature_2m_max","temperature_2m_min","apparent_temperature_max","apparent_temperature_min","sunrise","sunset","precipitation_sum","showers_sum","precipitation_hours","windspeed_10m_max","windgusts_10m_max","winddirection_10m_dominant","shortwave_radiation_sum","et0_fao_evapotranspiration"],N="_list_xfqf9_1",D="_item_xfqf9_10",E="_button_xfqf9_14",h={list:N,item:D,button:E},M=({suggestions:a=[],handleSuggestionClick:r})=>t.jsx("ul",{className:h.list,children:a.map(n=>t.jsx("li",{className:h.item,children:t.jsx("button",{className:h.button,onClick:()=>r(n),children:n})},n))}),k="_input_11qs7_1",$="_dropDown_11qs7_17",q="_dropDown__item_11qs7_25",V="_dropDown__button_11qs7_28",W={input:k,dropDown:$,dropDown__item:q,dropDown__button:V},C=a=>{const{handleVariables:r,placeholder:n}=a,[s,i]=o.useState("rain_sum, snowfall_sum"),[e,u]=o.useState(["rain_sum","snowfall_sum"]),[w,m]=o.useState([]),p=o.useRef(null);o.useEffect(()=>{const c=j.filter(d=>s.includes(d));u(c);const l=s.split(/\s+/).pop();if(l){const d=j.filter(f=>f.startsWith(l)&&!e.includes(f));m(d)}else m([])},[s]),o.useEffect(()=>{r(e)},[e]);const b=c=>{const l=s.split(/\s+/);l[l.length-1]=c,i(l.join(" ")),m([]),p.current&&p.current.focus()};return t.jsxs("div",{children:[t.jsx("input",{ref:p,className:W.input,type:"text",placeholder:n,value:s,onChange:c=>i(c.target.value)}),w.length>0&&t.jsx(M,{suggestions:w,handleSuggestionClick:b})]})},R="_table_1f0lk_1",P="_cell_1f0lk_5",T="_cell_title_1f0lk_10",_={table:R,cell:P,cell_title:T},x={rain_sum:"Rain sum",snowfall_sum:"Snowfall sum",weathercode:"Weather code",temperature_2m_max:"Max temperature 2m",temperature_2m_min:"Min temperature 2m",apparent_temperature_max:"Max apparent temperature",apparent_temperature_min:"Min apparent temperature",sunrise:"Sunrise",sunset:"Sunset",precipitation_sum:"Precipitation sum",showers_sum:"Showers sum",precipitation_hours:"Precipitation hours",windspeed_10m_max:"Max windspeed 10m",windgusts_10m_max:"Max windgusts 10m",winddirection_10m_dominant:"Winddirection dominant 10m",shortwave_radiation_sum:"Shortwave radiation sum",et0_fao_evapotranspiration:"Evapotranspiration"},z=a=>x==null?void 0:x[a],A=a=>{const{data:r,variables:n=[]}=a;return!r||!r.daily?t.jsx("div",{children:"Нет данных о погоде"}):n.length===0?t.jsx("div",{children:"Введите значение"}):t.jsxs("table",{className:_.table,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:_.cell_title,children:"Date"}),n.map(s=>t.jsx("th",{className:_.cell_title,children:z(s)},s))]})}),t.jsx("tbody",{children:r.daily.time.map((s,i)=>t.jsxs("tr",{children:[t.jsx("td",{className:_.cell,children:s}),n.map(e=>{var u;return t.jsx("td",{className:_.cell,children:`${(u=r.daily[e])==null?void 0:u[i]} ${r.daily_units[e]}`},e)})]},s))})]})},I=()=>{const[a,r]=o.useState(),[n,s]=o.useState([]),i=e=>{s(e)};return o.useEffect(()=>{y(n).then(e=>r(e)).catch(e=>new Error("Ошибка при получении данных:",e))},[n]),t.jsxs(v,{children:[t.jsx(C,{handleVariables:i,placeholder:"Поиск..."}),t.jsx(A,{data:a,variables:n})]})};export{I as default};
